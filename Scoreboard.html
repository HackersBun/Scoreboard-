<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Office Cricket Match Scoreboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            margin: 20px;
        }
        .team {
            border: 1px solid #ccc;
            padding: 10px;
            width: 30%;
            box-shadow: 2px 2px 12px #aaa;
        }
        .player-list {
            list-style-type: none;
            padding: 0;
        }
        .player-list li {
            cursor: pointer;
            padding: 5px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }
        .player-list li:hover {
            background-color: #f0f0f0;
        }
        .player-list li.selected {
            background-color: #f0f0f0;
        }
        .player-list li.out {
            color: red;
        }
        .score-board {
            margin-top: 20px;
        }
        .controls {
            margin-top: 20px;
        }
        .controls button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
        }
        .extras-tab {
            margin-top: 20px;
            display: none;
        }
        .extras-tab.active {
            display: block;
        }
        .history-controls {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="team" id="team1">
        <h2>Kanguva</h2>
        <ul class="player-list">
            <li data-player="vivek">Vivek <span id="vivek-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="ponz">Ponz <span id="ponz-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="manoj">Manoj <span id="manoj-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="srini">Srini <span id="srini-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="kavi">Kavi <span id="kavi-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="girish">Girish <span id="girish-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="ram">Ram <span id="ram-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="gokul">Gokul <span id="gokul-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="aswin">Aswin <span id="aswin-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="prajosh">Prajosh <span id="prajosh-score" ondblclick="editScore(event)">0</span></li>
        </ul>
        <div class="score-board" id="team1-score">
            <h3>Score: 0/0</h3>
            <p>Overs: 0.0</p>
        </div>
        <div class="controls">
            <button onclick="addRuns(1, 'team1')">1</button>
            <button onclick="addRuns(2, 'team1')">2</button>
            <button onclick="addRuns(4, 'team1')">4</button>
            <button onclick="addRuns(6, 'team1')">6</button>
            <button onclick="nextBall('team1')">Next Ball</button>
            <button onclick="toggleExtras('team1')">Extras</button>
            <button onclick="playerOut('team1')">Wicket</button>
            <button onclick="resetWicket('team1')">Reset Wicket</button>
        </div>
        <div class="extras-tab" id="team1-extras">
            <button onclick="addExtras('lb', 'team1')">LB</button>
            <button onclick="addExtras('wd', 'team1')">WD</button>
            <button onclick="addExtras('nb', 'team1')">NB</button>
            <button onclick="addExtras('b', 'team1')">B</button>
        </div>
        <div class="history-controls">
            <button onclick="undo('team1')">Undo</button>
            <button onclick="redo('team1')">Redo</button>
        </div>
    </div>

    <div class="team" id="team2">
        <h2>Indian 2</h2>
        <ul class="player-list">
            <li data-player="santhosh">Santhosh <span id="santhosh-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="vicky">Vicky <span id="vicky-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="praveen">Praveen <span id="praveen-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="sathya">Sathya <span id="sathya-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="abdul">Abdul <span id="abdul-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="sandeep">Sandeep <span id="sandeep-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="bala">Bala <span id="bala-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="karthik">Karthik <span id="karthik-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="monish">Monish <span id="monish-score" ondblclick="editScore(event)">0</span></li>
            <li data-player="vishnu">Vishnu <span id="vishnu-score" ondblclick="editScore(event)">0</span></li>
        </ul>
        <div class="score-board" id="team2-score">
            <h3>Score: 0/0</h3>
            <p>Overs: 0.0</p>
        </div>
        <div class="controls">
            <button onclick="addRuns(1, 'team2')">1</button>
            <button onclick="addRuns(2, 'team2')">2</button>
            <button onclick="addRuns(4, 'team2')">4</button>
            <button onclick="addRuns(6, 'team2')">6</button>
            <button onclick="nextBall('team2')">Next Ball</button>
            <button onclick="toggleExtras('team2')">Extras</button>
            <button onclick="playerOut('team2')">Wicket</button>
            <button onclick="resetWicket('team2')">Reset Wicket</button>
        </div>
        <div class="extras-tab" id="team2-extras">
            <button onclick="addExtras('lb', 'team2')">LB</button>
            <button onclick="addExtras('wd', 'team2')">WD</button>
            <button onclick="addExtras('nb', 'team2')">NB</button>
            <button onclick="addExtras('b', 'team2')">B</button>
        </div>
        <div class="history-controls">
            <button onclick="undo('team2')">Undo</button>
            <button onclick="redo('team2')">Redo</button>
        </div>
    </div>

    <script>
        let selectedPlayer = null;
        const history = { team1: { actions: [], undoneActions: [] }, team2: { actions: [], undoneActions: [] } };

        document.querySelectorAll('.player-list li').forEach(item => {
            item.addEventListener('click', event => {
                document.querySelectorAll('.player-list li').forEach(el => el.classList.remove('selected'));
                event.target.classList.add('selected');
                selectedPlayer = event.target.getAttribute('data-player');
            });
        });

        function addRuns(runs, team) {
            if (!selectedPlayer) return alert('Please select a player first.');
            updateScore(runs, team);
        }

        function nextBall(team) {
            const scoreBoard = document.getElementById(`${team}-score`);
            let [totalRuns, wickets] = scoreBoard.querySelector('h3').innerText.match(/\d+/g).map(Number);
            let [overs, balls] = scoreBoard.querySelector('p').innerText.match(/\d+/g).map(Number);
            balls++;
            if (balls === 6) {
                overs++;
                balls = 0;
            }
            scoreBoard.querySelector('p').innerText = `Overs: ${overs}.${balls}`;
            saveAction({ type: 'ball', overs, balls }, team);
        }

        function toggleExtras(team) {
            const extrasTab = document.getElementById(`${team}-extras`);
            extrasTab.classList.toggle('active');
        }

        function addExtras(type, team) {
            const scoreBoard = document.getElementById(`${team}-score`);
            let [totalRuns, wickets] = scoreBoard.querySelector('h3').innerText.match(/\d+/g).map(Number);
            let extraRuns = 0;
            switch (type) {
                case 'lb':
                case 'wd':
                case 'nb':
                    extraRuns = 1;
                    break;
                case 'b':
                    extraRuns = 1;
                    wickets++;
                    break;
            }
            totalRuns += extraRuns;
            scoreBoard.querySelector('h3').innerText = `Score: ${totalRuns}/${wickets}`;
            saveAction({ type: 'extra', extraType: type, extraRuns, wickets }, team);
            toggleExtras(team);
        }

        function playerOut(team) {
            if (!selectedPlayer) return alert('Please select a player first.');
            const playerElement = document.querySelector(`#${team} .player-list li[data-player="${selectedPlayer}"]`);
            playerElement.classList.add('out');
            const scoreBoard = document.getElementById(`${team}-score`);
            let [totalRuns, wickets] = scoreBoard.querySelector('h3').innerText.match(/\d+/g).map(Number);
            wickets++;
            scoreBoard.querySelector('h3').innerText = `Score: ${totalRuns}/${wickets}`;
            selectedPlayer = null;
            playerElement.classList.remove('selected');
            saveAction({ type: 'wicket', wickets }, team);
        }

        function resetWicket(team) {
            const playerList = document.querySelector(`#${team} .player-list`);
            playerList.querySelectorAll('li').forEach(item => {
                item.classList.remove('out');
            });
            const scoreBoard = document.getElementById(`${team}-score`);
            let [totalRuns, wickets] = scoreBoard.querySelector('h3').innerText.match(/\d+/g).map(Number);
            wickets = 0;
            scoreBoard.querySelector('h3').innerText = `Score: ${totalRuns}/${wickets}`;
            saveAction({ type: 'resetWicket', wickets }, team);
        }

        function editScore(event) {
            const span = event.target;
            const newScore = prompt('Enter new score:', span.innerText);
            if (newScore !== null && !isNaN(newScore)) {
                const oldScore = parseInt(span.innerText);
                span.innerText = newScore;
                const player = span.id.split('-')[0];
                saveAction({ type: 'editScore', player, oldScore, newScore }, span.id.split('-')[1]);
            }
        }

        function updateScore(runs, team) {
            const scoreBoard = document.getElementById(`${team}-score`);
            let [totalRuns, wickets] = scoreBoard.querySelector('h3').innerText.match(/\d+/g).map(Number);
            totalRuns += runs;
            scoreBoard.querySelector('h3').innerText = `Score: ${totalRuns}/${wickets}`;

            const playerScore = document.getElementById(`${selectedPlayer}-score`);
            playerScore.innerText = parseInt(playerScore.innerText) + runs;
            saveAction({ type: 'runs', player: selectedPlayer, runs }, team);
        }

        function saveAction(action, team) {
            history[team].actions.push(action);
            history[team].undoneActions = [];
        }

        function undo(team) {
            if (history[team].actions.length === 0) return alert('No actions to undo.');
            const lastAction = history[team].actions.pop();
            history[team].undoneActions.push(lastAction);

            const scoreBoard = document.getElementById(`${team}-score`);
            let [totalRuns, wickets] = scoreBoard.querySelector('h3').innerText.match(/\d+/g).map(Number);
            let [overs, balls] = scoreBoard.querySelector('p').innerText.match(/\d+/g).map(Number);

            switch (lastAction.type) {
                case 'runs':
                    totalRuns -= lastAction.runs;
                    document.getElementById(`${lastAction.player}-score`).innerText = parseInt(document.getElementById(`${lastAction.player}-score`).innerText) - lastAction.runs;
                    break;
                case 'extra':
                    totalRuns -= lastAction.extraRuns;
                    if (lastAction.extraType === 'b') wickets--;
                    break;
                case 'wicket':
                    wickets--;
                    document.querySelector(`#${team} .player-list li[data-player="${selectedPlayer}"]`).classList.remove('out');
                    selectedPlayer = null;
                    break;
                case 'resetWicket':
                    wickets = lastAction.wickets;
                    document.querySelectorAll(`#${team} .player-list li`).forEach(item => item.classList.remove('out'));
                    break;
                case 'ball':
                    overs = lastAction.overs;
                    balls = lastAction.balls;
                    break;
                case 'editScore':
                    document.getElementById(`${lastAction.player}-score`).innerText = lastAction.oldScore;
                    totalRuns -= (lastAction.newScore - lastAction.oldScore);
                    break;
            }

            scoreBoard.querySelector('h3').innerText = `Score: ${totalRuns}/${wickets}`;
            scoreBoard.querySelector('p').innerText = `Overs: ${overs}.${balls}`;
        }

        function redo(team) {
            if (history[team].undoneActions.length === 0) return alert('No actions to redo.');
            const lastUndoneAction = history[team].undoneActions.pop();
            history[team].actions.push(lastUndoneAction);

            const scoreBoard = document.getElementById(`${team}-score`);
            let [totalRuns, wickets] = scoreBoard.querySelector('h3').innerText.match(/\d+/g).map(Number);
            let [overs, balls] = scoreBoard.querySelector('p').innerText.match(/\d+/g).map(Number);

            switch (lastUndoneAction.type) {
                case 'runs':
                    totalRuns += lastUndoneAction.runs;
                    document.getElementById(`${lastUndoneAction.player}-score`).innerText = parseInt(document.getElementById(`${lastUndoneAction.player}-score`).innerText) + lastUndoneAction.runs;
                    break;
                case 'extra':
                    totalRuns += lastUndoneAction.extraRuns;
                    if (lastUndoneAction.extraType === 'b') wickets++;
                    break;
                case 'wicket':
                    wickets++;
                    document.querySelector(`#${team} .player-list li[data-player="${selectedPlayer}"]`).classList.add('out');
                    selectedPlayer = null;
                    break;
                case 'resetWicket':
                    wickets = lastUndoneAction.wickets;
                    document.querySelectorAll(`#${team} .player-list li`).forEach(item => item.classList.add('out'));
                    break;
                case 'ball':
                    overs = lastUndoneAction.overs;
                    balls = lastUndoneAction.balls;
                    break;
                case 'editScore':
                    document.getElementById(`${lastUndoneAction.player}-score`).innerText = lastUndoneAction.newScore;
                    totalRuns += (lastUndoneAction.newScore - lastUndoneAction.oldScore);
                    break;
            }

            scoreBoard.querySelector('h3').innerText = `Score: ${totalRuns}/${wickets}`;
            scoreBoard.querySelector('p').innerText = `Overs: ${overs}.${balls}`;
        }
    </script>
</body>
</html>